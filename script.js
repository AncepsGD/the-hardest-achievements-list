"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function e(){};return{s:a,n:function t(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function e(t){throw t},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();return o=t.done,t},e:function e(t){c=!0,i=t},f:function e(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}document.addEventListener("DOMContentLoaded",function(){var e=function e(t,n){var r;return function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];clearTimeout(r),r=setTimeout(function(){return t.apply(void 0,a)},n)}},t=function e(t,n){if(!t||!n)return"N/A";var r=new Date(t),a=new Date(n);return Math.ceil(Math.abs(r-a)/864e5)},n=function e(n,r,a,i){var o=document.createElement("div");o.classList.add("achievement-item");var c=n.id||"placeholder-".concat(r);o.addEventListener("click",function(e){var t="/achievement/".concat(c);e.ctrlKey?window.open(t,"_blank"):0===e.button&&(window.location.href=t)});var s=document.createElement("div");s.classList.add("rank-date-container");var l="N/A";if(a&&i){var u=i[r-1];l=u?t(n.date,u.date):"N/A"}s.innerHTML='\n            <div class="achievement-length">'.concat(n.length?"".concat(Math.floor(n.length/60),":").concat((n.length%60).toString().padStart(2,"0")):"N/A","</div>\n            ").concat(a?'<div class="lasted-days">Lasted '.concat(l," days</div>"):'<div class="achievement-date">'.concat(new Date(n.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"</div>"),'\n            <div class="rank"><strong>').concat(a?new Date(n.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"#".concat(r+1),"</strong></div>\n        ");var d=document.createElement("div");d.classList.add("tag-container");var f={LEVEL:{color:"rgb(34, 139, 34)",text:"Level"},CHALLENGE:{color:"rgb(255, 165, 0)",text:"Challenge"},"LOW HERTZ":{color:"rgb(128, 0, 128)",text:"Low Hertz"},MOBILE:{color:"rgb(0, 191, 255)",text:"Mobile"},SPEEDHACK:{color:"rgb(255, 69, 0)",text:"Speedhack"},NOCLIP:{color:"rgb(139, 0, 0)",text:"Noclip"},MISCELLANEOUS:{color:"rgb(105, 105, 105)",text:"Miscellaneous"},PROGRESS:{color:"rgb(70, 130, 180)",text:"Progress"},CONSISTENCY:{color:"rgb(75, 0, 130)",text:"Consistency"},"2P":{color:"rgb(230, 115, 39)",icon:"/assets/2p-icon.png",text:"2 Player"},CBF:{color:"rgb(219, 48, 63)",icon:"/assets/cbf-logo.png",text:"CBF"},RATED:{color:"rgb(230, 184, 60)",icon:"/assets/rated-icon.png",text:"Rated"},"FORMERLY RATED":{color:"rgb(131, 51, 37)",icon:"/assets/formerly-rated-icon.png",text:"Formerly Rated"},"OUTDATED VERSION":{color:"rgb(110, 103, 33)",icon:"/assets/outdated-version-icon.png",text:"Outdated Version"}},v=["LEVEL","CHALLENGE","LOW HERTZ","MOBILE","SPEEDHACK","NOCLIP","MISCELLANEOUS","PROGRESS","CONSISTENCY","2P","CBF","RATED","FORMERLY RATED","OUTDATED VERSION"];(n.tags||[]).sort(function(e,t){return v.indexOf(e.toUpperCase())-v.indexOf(t.toUpperCase())}).forEach(function(e){var t=f[e.toUpperCase()];if(t){var n=document.createElement("div");n.classList.add("tag"),n.style.backgroundColor=t.color,n.innerHTML="\n                        ".concat(t.icon?'<img src="'.concat(t.icon,'" alt="').concat(t.text,' Icon" class="tag-icon">'):"","\n                        <span>").concat(t.text,"</span>\n                    "),d.appendChild(n)}});var h,p=document.createElement("div");return p.classList.add("achievement-details"),p.innerHTML='\n            <div class="text">\n                <h2>'.concat(n.name,"</h2>\n                <p>").concat(n.player,'</p>\n            </div>\n            <div class="thumbnail-container">\n                <img data-src="').concat((h=n).thumbnail||(h.levelID?"https://tjcsucht.net/levelthumbs/".concat(h.levelID,".png"):"default-thumbnail.png"),'" loading="lazy">\n            </div>\n        '),o.append(s,d,p),o},r=function e(t){var n=document.getElementById("dynamic-background");n&&!n.hasAttribute("data-achievement-bg")&&(n.style.backgroundImage="url(".concat(t,")"))},a=function t(a,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];fetch(i).then(function(e){return e.json()}).then(function(t){if(t.length>0){var i=t[0];r(i.thumbnail||(i.levelID?"https://tjcsucht.net/levelthumbs/".concat(i.levelID,".png"):"default-thumbnail.png"))}var c=document.getElementById("achievements-container"),s=new Set;t.forEach(function(e){return(e.tags||[]).forEach(function(e){return s.add(e)})});var l=["LEVEL","CHALLENGE","LOW HERTZ","MOBILE","SPEEDHACK","NOCLIP","MISCELLANEOUS","PROGRESS","CONSISTENCY","2P","CBF","RATED","FORMERLY RATED","OUTDATED VERSION"],u=Array.from(s).sort(function(e,t){var n=l.indexOf(e.toUpperCase()),r=l.indexOf(t.toUpperCase());return -1===n&&-1===r?e.localeCompare(t):-1===n?1:-1===r?-1:n-r}),d=document.getElementById("search-filter-static-container"),f=document.querySelector(".search-filter-container");if(d&&!f){var v=function e(t,n){var r=document.createElement("div");r.className="search-filter-container";var a=document.createElement("div");a.className="tag-filter-pills",a.setAttribute("tabindex","0");var i={};n.forEach(function(e){return i[e]="neutral"}),n.forEach(function(e){var n=document.createElement("span");n.className="tag-filter-pill neutral",n.textContent=e,n.setAttribute("tabindex","0"),n.setAttribute("data-tag",e),n.setAttribute("aria-label","".concat(e," filter pill")),n.addEventListener("click",function(){var r,a;"neutral"===i[e]?i[e]="include":"include"===i[e]?i[e]="exclude":i[e]="neutral",r=n,a=i[e],r.classList.remove("neutral","include","exclude"),r.classList.add(a),t()}),n.addEventListener("keydown",function(e){(" "===e.key||"Enter"===e.key)&&(n.click(),e.preventDefault())}),a.appendChild(n)}),r.appendChild(a),r.getTagFilterState=function(){var e=[],t=[];for(var n in i)"include"===i[n]&&e.push(n),"exclude"===i[n]&&t.push(n);return{include:e,exclude:t}};var o=document.getElementById("mobile-filter-toggle-btn");if(o){var c=document.querySelector("header");c&&c.appendChild(o)}function s(){window.innerWidth<=900?(o&&(o.style.display=""),a.style.display=r.classList.contains("mobile-filters-shown")?"":"none",r.classList.contains("mobile-filters-shown")?o&&(o.innerHTML='<span class="arrow-img-wrapper"><img src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/icons/chevron-up.svg" alt="Hide Filters" style="width: 20px; height: 20px; filter: invert(92%) sepia(7%) saturate(104%) hue-rotate(200deg) brightness(97%) contrast(92%);"></span>'):o&&(o.innerHTML='<span class="arrow-img-wrapper"><img src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/icons/chevron-down.svg" alt="Show Filters" style="width: 20px; height: 20px; filter: invert(92%) sepia(7%) saturate(104%) hue-rotate(200deg) brightness(97%) contrast(92%);"></span>')):(o&&(o.style.display="none"),a.style.display="",r.classList.remove("mobile-filters-shown"),o&&(o.innerHTML='<span class="arrow-img-wrapper"><img src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/icons/chevron-down.svg" alt="Show Filters" style="width: 20px; height: 20px; filter: invert(92%) sepia(7%) saturate(104%) hue-rotate(200deg) brightness(97%) contrast(92%);"></span>'))}return o&&o.addEventListener("click",function(){r.classList.toggle("mobile-filters-shown"),s()}),window.addEventListener("resize",s),s(),{filterContainer:r}}(function(){return m()},u).filterContainer;d.appendChild(v),f=v}var h="default",p="";function m(){var e=document.getElementById("search-filter-select");e&&(h=e.value);var i=f&&"function"==typeof f.getTagFilterState?f.getTagFilterState():{include:[],exclude:[]},s=i.include,l=i.exclude,u=(function e(t,n){switch(n){case"length":return _toConsumableArray(t).sort(function(e,t){return(t.length||0)-(e.length||0)});case"alphabetical":return _toConsumableArray(t).sort(function(e,t){return(e.name||"").localeCompare(t.name||"",void 0,{sensitivity:"base"})});case"date":return _toConsumableArray(t).sort(function(e,t){return new Date(t.date)-new Date(e.date)});case"version":return _toConsumableArray(t).sort(function(e,t){return(e.version||"").localeCompare(t.version||"",void 0,{numeric:!0,sensitivity:"base"})});case"levelid":return _toConsumableArray(t).sort(function(e,t){return(e.levelID||0)-(t.levelID||0)});default:return a(t)}})(t,h).filter(function(e){var t="string"==typeof e.name?e.name:"",n=(e.tags||[]).map(function(e){return e.toUpperCase()});return!(s.length&&!s.every(function(e){return n.includes(e.toUpperCase())})||l.length&&l.some(function(e){return n.includes(e.toUpperCase())}))&&t.toLowerCase().includes(p)});c.innerHTML="";var d=document.createDocumentFragment();u.forEach(function(e,t){d.appendChild(n(e,t,o,u))}),c.appendChild(d),!function e(){var t=document.querySelectorAll(".achievement-item .thumbnail-container img[data-src]");if("IntersectionObserver"in window){var n=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var n=e.target;n.src=n.dataset.src,n.removeAttribute("data-src"),t.unobserve(n)}})},{rootMargin:"100px"});t.forEach(function(e){return n.observe(e)})}else t.forEach(function(e){e.src=e.dataset.src,e.removeAttribute("data-src")})}(),!o&&u.length>0&&r(u[0].thumbnail||(u[0].levelID?"https://tjcsucht.net/levelthumbs/".concat(u[0].levelID,".png"):"default-thumbnail.png"))}m();var g=document.querySelector(".search-bar input"),b=e(function(e){p=e.target.value.toLowerCase(),m()},250);g.addEventListener("input",b)})},i=function e(t){return t},o=function e(t){return t.sort(function(e,t){return new Date(t.date)-new Date(e.date)})};function c(){var e,t=s(window.location.href),n=document.querySelectorAll(".sidebar-link"),r=!1,a=_createForOfIteratorHelper(n);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=i.getAttribute("href");if(o&&"#"!==o){var c=s(o);i.classList.remove("active"),c!==t||r||(i.classList.add("active"),r=!0)}}}catch(l){a.e(l)}finally{a.f()}}function s(e){try{var t=new URL(e,window.location.href).pathname;return t.slice(t.lastIndexOf("/")+1).toLowerCase()}catch(n){var r=e.split(/[?#]/)[0];return r.slice(r.lastIndexOf("/")+1).toLowerCase()}}function l(){var e=document.getElementById("mobile-hamburger-btn"),t=document.getElementById("sidebar"),n=document.getElementById("sidebar-mobile-overlay");function r(){t.classList.remove("sidebar-mobile-open"),n.classList.add("hidden")}t&&e&&(n||((n=document.createElement("div")).id="sidebar-mobile-overlay",n.className="sidebar-mobile-overlay hidden",document.body.appendChild(n)),e.addEventListener("click",function(e){e.stopPropagation(),t.classList.add("sidebar-mobile-open"),n.classList.remove("hidden")}),n.addEventListener("click",r),document.addEventListener("keydown",function(e){"Escape"===e.key&&r()}),t.addEventListener("click",function(e){t.classList.contains("sidebar-mobile-open")&&e.stopPropagation()}))}window.location.pathname.includes("timeline.html")?a(o,"timeline.json",!0):a(i,"achievements.json"),fetch("assets/sidebar.html").then(function(e){if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return e.text()}).then(function(e){var t=document.getElementById("sidebar");t&&(t.innerHTML=e,t.querySelectorAll(".sidebar-link.active").forEach(function(e){return e.classList.remove("active")}),requestAnimationFrame(function(){var e;c(),(e=document.getElementById("random-achievement-btn"))&&fetch("achievements.json").then(function(e){return e.json()}).then(function(t){var n=t.filter(function(e){return e&&e.id});e.addEventListener("click",function(e){if(e.preventDefault(),n.length>0){var t=n[Math.floor(Math.random()*n.length)];window.location.href="achievement.html?id=".concat(t.id)}})}).catch(function(e){return console.error("Failed to load achievements:",e)})}))}).catch(function(e){console.error("Error loading sidebar:",e)}),l(),window.addEventListener("pageshow",function(e){e.persisted&&(l(),c())}),window.addEventListener("pagehide",function(e){})});
